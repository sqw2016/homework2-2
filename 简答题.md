## 1、Webpack 的构建流程主要有哪些环节？如果可以请尽可能详尽的描述 Webpack 打包的整个过程。
解答：webpack构建的主要流程:  
1. 首先解析配置文件，并从配置中获取入口文件所在位置。  
2. 从配置文件开始解析，通过文件中的`import/require`等导入模块的语法的解析逐步构建表示项目文件依赖关系的依赖树。  
3. 递归依赖树，并找到文件，根据配置文件中的`loader`规则，使用相应的`loader`来加载文件。  
4. 将加载之后的文件合并之后输出到指定的目录文件中。

## 2、Loader 和 Plugin 有哪些不同？请描述一下开发 Loader 和 Plugin 的思路。
解答： `Loader` 和 `Plugin` 的不同：  
  1. 用途上来说，`Loader` 是用来加载资源的，而`Plugin`主要是用来进行除了资源加载之外的其他自动化任务的，如代码压缩，文件拷贝，目录清除等。  
  2. 从实现原理上来说，`Loader`是一个导出一个函数的 `Node` 模块，在加载资源时，会调用该函数对资源文件进行处理。`Plugin`则是通过钩子机制实现的，其本质是一个具有`apply`方法的类或函数。  
  3. 从配置上来说，`Loader`在通过`module`中的`rules`配置，而`Plugin`通过`plugins`属性来配置。  
  
  如何开发一个`Loader`?  
  `Loader`是一个导出一个函数的 `Node` 模块。接收上一个 `loader` 产生的结果或者资源文件(`resource file`) 作为参数，在函数内容可以通过`this`调用`loader API`。最后返回一个或者两个值。第一个值的类型是 `JavaScript` 代码的字符串或者 `buffer`，将作为输出到文件的内容或者下一个`loader`的参数。第二个参数值是 `SourceMap`，它是个`JavaScript` 对象。要开发一个`Loader`，首先需要新建`js`文件，该文件需要导出为一个函数，然后在函数中实现文件的加载转换，最后将转换之后的内容返回即可。  

如何开发一个`Plugin`?  
`Plugin`本质是`prototype`上包含`apply`方法的函数或类，这个`apply`方法会在安装插件时，被 `webpack compiler` 调用一次。要开发一个`Plugin`，首先需要定义一个类（或函数），然后在类中定义一个`apply`方法，该方法接收一个`compiler`对象，该对象代表了完整的 `webpack` 环境配置，包括`options`、`loader`、`plugin`、`hooks`等。最后根据插件的需求，确定插件所在事件钩子，并在该钩子中通过 `tap` 绑定一个回调函数到事件钩子中，在构建到该钩子所处阶段时会调用该回调函数，该回调函数接收一个`compilation`参数，代表当前的构建的上下文环境。可以通过 `compilation.assets` 对象访问到所有编译后的内容，在这里对内容进行处理。
